.TH awr "2rwl" "January 2022" "RWP*Load Simulator" "Utilities Syntax"
.SH NAME
awr.rwl \- Create an awr or ash report
.SH SYNOPSIS
\fBrwloadsim [options] -u -l u/p@c awr.rwl\fR
.P
\fBrwloadsim [options] -u -l u/p@c awr.rwl begsnap endsnap\fR
.P
\fBrwloadsim [options] -u -l u/p@c awr.rwl begtime endtime swidth\fR
.P
The first call without any positional arguments is used to
list available data in the awr repository.
You normally start with this call and gradually add
options to identify the database, instance and snapshot 
ranges available.
After having identified this, you can use one of the
other two calls to create either an awr or an ash report.
.P
The second call is used to create an awr report covering the
two provided snapshots
.P
The third call is used to create an ash report between the
two times and with the slot width set to the last argument.
.P
.P
.SH OPTIONS
\fB-u\fR
.RS 4
Compulsory option to find the awr.rwl script in the public directory.
.RE
.P
.B -l u/p
.br
.B -l u/p@c
.RS 4
Compulsory option to provide the username, password, and potentially
connect string for a database connection that provides access to
a login with access to various the dba_ views containing the awr
repository.
If you omit /p, rwloadsim will prompt for the password.
.RE
.P
.B --dbid=<dbid>
.RS 4
Without this option, provide a list of all available databases
with the dbid in the awr repository.
The list will indicate if the database is a root of a cdb, a
pdb, or an imported awr dump.
With this option, list snapshots available in the database with
the chosen dbid.
This option is required to generate awr or ash report.
.RE
.P
.B --instance=<instance>
.RS 4
Limit the list of available snapshots to one particular instance
or provide an instance for awr/ash generation.
.RE
.P
.B --fromtime=YYYY.MM.DDTHH24:MI
.P
.B --totime=YYYY.MM.DDTHH24:MI
.RS 4
Limit the list of snapshot to a date range; either or both options
can be provided.
Note that dates must be in the exact format shown, which is also
the format used when outputting lists of snapshots.
You can omit the : and MI or the T and the entire time part.
.RE
.P
.B --no-headings
.RS 4
In the various lists, do not output headings.
.RE
.P
.B --output-text
.RS 4
If generating an awr or ash,
the output will be in text (ASCII) format.
The default is html format.
.RE
.P
.B --output-file=<filename>
.RS 4
If generating an awr or ash,
the output is written to a file with default name based on the input.
Use this option to specify a different filename.
.RE
.P
.B --output-directory=<directory>
.RS 4
By default, the output is written in your current directory.
Use this option to specify a different directory.
.RE
.P
\fBbegsnap endsnap\fR
.RS 4
.P
If there are two positional arguments, they must be awr snapshot ids,
and an awr will be created with these as begin and end snapshot.
This requires --dbid and --instance as well.
.RE
.P
\fBbegtime endtime swidth\fR
.RS 4
.P
If there are three positional arguments, the first two must be timestaps
in the format mentioned above, and the last must be a number, which is
the slot width (in seconds).
This causes an ash report to be created.
Both --dbid and --instance a are needed as well.
.RE
.SH EXAMPLES
.nf
rwloadsim -ul system/{password} awr.rwl
.fi
.P
which may generate an output like:
.P
.nf
       dbid con snap cnt instance list
----------- --- -------- -------------
  607296874  /       408 1,2
 4001460110        12321 1,2,3,4,5,6,7,8
.fi
.P
This tells that there is data from two databases available in
the repository.
The first one is a root in a container with a total of 408
snapshots available for instances 1 and 2.
The second database is from an imported awr dump with 12321
snapshots available from instances 1 until 8.
.P
The next step would be to provide a dbid such as:
.P
.nf
rwloadsim --dbid=607296874 -ul system/{password} awr.rwl
.fi
.P
which may generate an output like this:
.P
.nf
i#  losnap  hisnap  snaps       losnap_end      hisnap_end
-- ------- ------- ------ ---------------- ---------------
 1    6688    6891    204 2022.04.04T20:00 2022.04.13T07:00
 2    6688    6891    204 2022.04.04T20:00 2022.04.13T07:00
.fi
.P
To see all available snapshots in some specific time range, you could then do
.P
.nf
rwloadsim --fromtime=2022.04.05T08:00 --totime=2022.04.05T18:00 --dbid 607296874 -ul system/{password} awr.rwl

i#     snap    snap_end_time   instance_start
--  ------- ---------------- ----------------
 1     6700 2022.04.05T08:00 2021.12.09T08:25
 1     6701 2022.04.05T09:00 2021.12.09T08:25
 1     6702 2022.04.05T10:00 2021.12.09T08:25
 1     6703 2022.04.05T11:00 2021.12.09T08:25
 1     6704 2022.04.05T12:00 2021.12.09T08:25
  ...
 2     6707 2022.04.05T15:00 2021.12.09T08:31
 2     6708 2022.04.05T16:00 2021.12.09T08:31
 2     6709 2022.04.05T17:00 2021.12.09T08:31
 2     6710 2022.04.05T18:00 2021.12.09T08:31
.fi
.P
You can finally create an awr report as a html file in the /var/www/html/awrs
directory by doing something like:
.P
.nf
rwloadsim --output-dir=/var/www/html/awrs --inst=1 --dbid=607296874 -ul system/{password} awr.rwl 6702 6703
.fi
.P
An example of how to generate an ash report as a text file is:
.P
.nf
rwloadsim --output-text --instance=3 --output-file=ash.txt --dbid 4001460110 -ul system/{password} awr.rwl 2022.04.02T22:20 2022.04.02T22:30 30
.fi
.SH BUGS
There is currently no support to create a global (RAC) awr report.
.SH COPYRIGHT
Copyright \(co 2022 Oracle Corporation
.br
Licensed under the Universal Permissive License v 1.0
as shown at https://oss.oracle.com/licenses/upl
.SH "SEE ALSO"
rwloadsim(1rwl), ashplot(2rwl), utilities(2rwl)
