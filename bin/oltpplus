#!/bin/bash
# Copyright (c) 2021 Oracle Corporation
# Licensed under the Universal Permissive License v 1.0
# as shown at https://oss.oracle.com/licenses/upl/

save_oracle_path="$ORACLE_PATH"

. oltp-setup-env

# This shell script will call sqlplus using username, password
# and connect string from your key file.
# ./scale.sh -k key -l 4 -i 4 -h 20 komment for this scale run
#
help=no
username=''
password=''
connect=''

# Get directory names from parameters.rwl

eval `rwloadsim -q parameters2shell.rwl`

export ORACLE_PATH="$save_oracle_path"

set -- `getopt -u -n $0 -o 'HASRrao' -l help -l awr -l system -l results -l run -l aw -l oe -- "$@"`

while test $1 != '--'
do
  case $1 in
    --awr|-A) 
      username=$system_username
      password=$system_password
      connect=$normal_connect
      shift
    ;;
    --system|-S)
      username=$cruser_username
      password=$cruser_password
      connect=$cruser_connect
      shift
    ;;
    --oe|-o)
      username=$rwl_oe_username
      password=$rwl_oe_password
      connect=$normal_connect
      shift
    ;;
    --aw|-r)
      username=$rwl_aw1_username
      password=$rwl_aw1_password
      connect=$normal_connect
      shift
    ;;
    --run|-r)
      username=$rwl_run1_username
      password=$rwl_run1_password
      connect=$normal_connect
      shift
    ;;
    --results|-R)
      username=$results_username
      password=$results_password
      connect=$results_connect
      shift
    ;;
    --help|-H) help=yes; shift;
    ;;
  esac
done

if test x$help = xyes -o -z "$username"
then
  echo Usage: $0 '[-H|--help] [-A|--awr] [-S|--system] [-R|--results] [-r|--run] [-a|--aw] [-o|--oe]' 1>&2
  exit 1
fi

echo 'sqlplus '$username'/******@'$connect
exec sqlplus $username/$password@$connect
